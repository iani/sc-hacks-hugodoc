<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.25" />
    <meta name="description" content="Documentation for a SuperCollider Library">
<meta name="author" content="Ioannis Zannos">

    <title>Improving Function:eplay :: sc-hacks documentation</title>
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/horsey.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    

  </head>
  <body class="" data-url="/main/004-improving_eplay/">
    <nav id="sidebar" class="">
  <div id="header-wrapper">
    <div id="header">
       
	<p>sc-hacks Documentation</p>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/js/lunr.min.js"></script>
<script type="text/javascript" src="/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "\/";
</script>
<script type="text/javascript" src="/js/search.js"></script>

    
  </div>





<div class="highlightable">
    <ul class="topics">
        
        
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
        

        




<li data-nav-id="/main/" class="dd-item 
parent


">
  <a href="/main/">
    <span>Operators and Language Design</span>

    
    <i class="fa fa-angle-down fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/main/002-operator-overview/" class="dd-item
         
          ">
            <a href="/main/002-operator-overview/">
            <span>Operator Overview</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/main/003-mini-language-overview/" class="dd-item
         
          ">
            <a href="/main/003-mini-language-overview/">
            <span>Mini-Language Overview</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/main/004-improving_eplay/" class="dd-item
         active
          ">
            <a href="/main/004-improving_eplay/">
            <span>Improving Function:eplay</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/main/005-function-eplay/" class="dd-item
         
          ">
            <a href="/main/005-function-eplay/">
            <span>Play a function in the environment</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/patterns/" class="dd-item 



">
  <a href="/patterns/">
    <span>Patterns</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/patterns/007-playing-events-as-patterns/" class="dd-item
         
          ">
            <a href="/patterns/007-playing-events-as-patterns/">
            <span>Playing Events as Patterns</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/patterns/008-events-as-patterns/" class="dd-item
         
          ">
            <a href="/patterns/008-events-as-patterns/">
            <span>Playing Events as Patterns</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/patterns/009-event-stream/" class="dd-item
         
          ">
            <a href="/patterns/009-event-stream/">
            <span>Modify Patterns while playing</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/patterns/010-event-eplay/" class="dd-item
         
          ">
            <a href="/patterns/010-event-eplay/">
            <span>Patterns updating current environment</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/gui/" class="dd-item 



">
  <a href="/gui/">
    <span>GUI</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/gui/012-creating-guis/" class="dd-item
         
          ">
            <a href="/gui/012-creating-guis/">
            <span>Creating GUIs</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/gui/013-building-guis/" class="dd-item
         
          ">
            <a href="/gui/013-building-guis/">
            <span>Building GUIs</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/buffers_and_grains/" class="dd-item 



">
  <a href="/buffers_and_grains/">
    <span>Playing buffers and grains</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/buffers_and_grains/015-triggering-methods/" class="dd-item
         
          ">
            <a href="/buffers_and_grains/015-triggering-methods/">
            <span>Triggering Methods</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/buffers_and_grains/016-triggering-envgen/" class="dd-item
         
          ">
            <a href="/buffers_and_grains/016-triggering-envgen/">
            <span>Triggering EnvGen and Line</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/buffers_and_grains/017-playing-grains/" class="dd-item
         
          ">
            <a href="/buffers_and_grains/017-playing-grains/">
            <span>Playing Grains</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/data/" class="dd-item 



">
  <a href="/data/">
    <span>Playing with data</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/data/019-playing-with-data/" class="dd-item
         
          ">
            <a href="/data/019-playing-with-data/">
            <span>Playing With Data</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/server_objects/" class="dd-item 



">
  <a href="/server_objects/">
    <span>Server objects</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/server_objects/021-server-objects/" class="dd-item
         
          ">
            <a href="/server_objects/021-server-objects/">
            <span>Server Objects</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/basic_classes/" class="dd-item 



">
  <a href="/basic_classes/">
    <span>Basic Classes</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/basic_classes/023-registry/" class="dd-item
         
          ">
            <a href="/basic_classes/023-registry/">
            <span>Registry: Hierarchical Namespaces</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/basic_classes/024-notification/" class="dd-item
         
          ">
            <a href="/basic_classes/024-notification/">
            <span>Notification</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/use_examples/" class="dd-item 



">
  <a href="/use_examples/">
    <span>Use examples</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/use_examples/026-pattern-synth-play/" class="dd-item
         
          ">
            <a href="/use_examples/026-pattern-synth-play/">
            <span>Pattern and Synth play scenarios</span> 
            

            </a></li>
         
        
        




    </ul>
</li>



        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='/'>Main</a> > <a href='/main/'>Operators and Language Design</a> > Improving Function:eplay

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">

    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Improving Function:eplay</h1>
          




<p>Individual improvement steps for Function:eplay: Done and TODO.  Thesse notes are from an early stage in development.  Now the functionality of most done steps has been integrated in class <code>SynthPlayer</code>.</p>

<h1 id="done-11-jun-2017-21-48">Done (11 Jun 2017 21:48)</h1>

<ul>
<li>Store the resulting synth in envir under <code>[\synths, synthName]</code> (default for <code>synthName=: =synth</code>).</li>
<li>If previous synth exists under <code>[\synths, synthName]</code> path, then free/release it.</li>
<li>When a synth ends, remove it from its path in envir.</li>
<li>Make sure that when a synth <code>previousSynth</code> is released by replacing it through a new synth created through <code>Function:eplay</code>, the <code>previousSynth</code> ending does not remove the new synth that has already been stored in the same path.</li>
<li>Notification actions for updates from enviroment variable changes are added when the Synth starts (not when the <code>Function:play</code> message is sent). This way, there are no more errors "Node not found" when changing the environment before the synth has started.</li>
</ul>

<h1 id="done-19-jun-2017-10-52">Done (19 Jun 2017 10:52):</h1>

<h2 id="synth-start-stop-release-and-set-control-from-event-eplay-eventpatterns">Synth start-stop (release) and set control from Event:eplay (EventPatterns)</h2>

<p>The following will add some complexity to the current scheme and may therefore be added later on only.</p>

<ul>
<li>Define <code>SynthPlayer</code> to add synth start-stop capabilities to <code>Function:eplay</code></li>
<li>Add synths instance variable to Nevent for faster access to SynthPlayers</li>
</ul>

<p>In addition to listening for changes from the <code>currentEnvironment</code>, a second notification mechanism should be added to Function:eplay, to enable creating new synths, releasing or freeing this synth when playing EventPatterns with an <code>EventStreamPlayer</code>.  A simple way to do this is by a stream which generates the commands to be played.  The stream is stored in a key with the same name as the synth to be controlled.  Function:eplay or SynthPlayer:play adds the environment as notifier to the synth with the synth's name as message and a switch statement which choses the action to be performed depending on the value that was sent in addition to the key (message) by the changed message. A draft for this code has been added now to Function:eplay:</p>

<pre><code class="language-javascript">
  synth.onStart (this, {| myself |
	  // &quot;Synth started, so I add notifiers for updates&quot;.postln;
	  argNames do: { | param |
		  synth.addNotifier (envir, param, { | val |
			  synth.set (param, val);
		  });
		  // Experimental: 
		  synth.addNotifier (envir, name, { | command |
			  //	command.postln;
			  switch (command,
				  \stop, {
					  synth.objectClosed;
					  synth.release (envir [\releaseTime] ? 0.02);
				  },
				  { postf (&quot;the command was: %\n&quot;, command)}
			  )
		  })
	  };
  });
</code></pre>

<h1 id="still-todo-19-jun-2017-10-52">Still TODO (19 Jun 2017 10:52)</h1>

<h2 id="synth-start-stop-notifications-for-gui-and-other-listeners">Synth start-stop notifications for GUI and other listeners</h2>

<ul>
<li>When a new synth starts or when an old synth is removed, it should emit notifications so that GUIS that depend on it update their status.  Such guis may be:</li>
<li>Start-stop buttons</li>
<li>Guis with widgets for controlling the synths parameters.  When a new synth starts, then the old gui should be replaced with a new one with widgets corresponding to the new synth's control parameters.</li>
  Note: Possibly the notification should be emitted from the =\synthName= under which the synth is stored.  The messages may be:
<li><code>\started</code></li>
<li><code>\stopped</code></li>
<li><code>\replaced</code></li>
    The above is subject to testing. 
</ul>

<h1 id="notes">Notes</h1>

<ul>
<li>When this is done, it should be possible to create multiple gui windows for multiple synths running in the same environment. However, parameters under the same name will control the parameters under that name for all synths in that environment.</li>
<li>To develop the right code for this, do it with a plain function, adding the functionalities one-by-one.</li>
</ul>

<h1 id="current-function-eplay-method-code">Current <code>Function:eplay</code> method code</h1>

<h1 id="drafts">Drafts</h1>

<p>See <a href="https://github.com/iani/sc-hacks/blob/master/LabCode/rebuildFunctionEplay.scd" title="https://github.com/iani/sc-hacks/blob/master/LabCode/rebuildFunctionEplay.scd">https://github.com/iani/sc-hacks/blob/master/LabCode/rebuildFunctionEplay.scd</a> for draft used to build this functionality in <code>SynthPlayer</code></p>


<footer class=" footline" >
	
</footer>



      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                
                
                    
            
            
                
                    
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
            
        
        
        


        
            <a class="nav nav-prev" href="/main/003-mini-language-overview/" title="Mini-Language Overview"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/main/005-function-eplay/" title="Play a function in the environment" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>

    
    <link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>

