<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.25" />
    <meta name="description" content="Documentation for a SuperCollider Library">
<meta name="author" content="Ioannis Zannos">

    <title>Triggering EnvGen and Line :: sc-hacks documentation</title>
    <link rel="shortcut icon" href="https://iani.github.io/sc-hacks-hugodoc/images/favicon.png" type="image/x-icon" />
    <link href="https://iani.github.io/sc-hacks-hugodoc/css/nucleus.css" rel="stylesheet">
    <link href="https://iani.github.io/sc-hacks-hugodoc/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://iani.github.io/sc-hacks-hugodoc/css/hybrid.css" rel="stylesheet">
    <link href="https://iani.github.io/sc-hacks-hugodoc/css/featherlight.min.css" rel="stylesheet">
    <link href="https://iani.github.io/sc-hacks-hugodoc/css/horsey.css" rel="stylesheet">
    <link href="https://iani.github.io/sc-hacks-hugodoc/css/theme.css" rel="stylesheet">
    <link rel="stylesheet" href="https://iani.github.io/sc-hacks-hugodoc/css/bootstrap.min.css">
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    

  </head>
  <body class="" data-url="/buffers_and_grains/016-triggering-envgen/">
    <nav id="sidebar" class="">
  <div id="header-wrapper">
    <div id="header">
       
	<p>sc-hacks Documentation</p>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="https://iani.github.io/sc-hacks-hugodoc/js/lunr.min.js"></script>
<script type="text/javascript" src="https://iani.github.io/sc-hacks-hugodoc/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/iani.github.io\/sc-hacks-hugodoc";
</script>
<script type="text/javascript" src="https://iani.github.io/sc-hacks-hugodoc/js/search.js"></script>

    
  </div>





<div class="highlightable">
    <ul class="topics">
        
        
            <li data-nav-id="/" class="dd-item">
            <a href="https://iani.github.io/sc-hacks-hugodoc/"><i class="fa fa-fw fa-home"></i></a>
            </li>
        

        




<li data-nav-id="/main/" class="dd-item 



">
  <a href="https://iani.github.io/sc-hacks-hugodoc/main/">
    <span>Operators and Language Design</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/main/002-operator-overview/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/main/002-operator-overview/">
            <span>Operator Overview</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/main/003-mini-language-overview/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/main/003-mini-language-overview/">
            <span>Mini-Language Overview</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/main/004-improving_eplay/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/main/004-improving_eplay/">
            <span>Improving Function:eplay</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/main/005-function-eplay/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/main/005-function-eplay/">
            <span>Play a function in the environment</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/patterns/" class="dd-item 



">
  <a href="https://iani.github.io/sc-hacks-hugodoc/patterns/">
    <span>Patterns</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/patterns/007-playing-events-as-patterns/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/patterns/007-playing-events-as-patterns/">
            <span>Playing Events as Patterns</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/patterns/008-events-as-patterns/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/patterns/008-events-as-patterns/">
            <span>Playing Events as Patterns</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/patterns/009-event-stream/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/patterns/009-event-stream/">
            <span>Modify Patterns while playing</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/patterns/010-event-eplay/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/patterns/010-event-eplay/">
            <span>Patterns updating current environment</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/gui/" class="dd-item 



">
  <a href="https://iani.github.io/sc-hacks-hugodoc/gui/">
    <span>GUI</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/gui/012-creating-guis/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/gui/012-creating-guis/">
            <span>Creating GUIs</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/gui/013-building-guis/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/gui/013-building-guis/">
            <span>Building GUIs</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/buffers_and_grains/" class="dd-item 
parent


">
  <a href="https://iani.github.io/sc-hacks-hugodoc/buffers_and_grains/">
    <span>Playing buffers and grains</span>

    
    <i class="fa fa-angle-down fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/buffers_and_grains/015-triggering-methods/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/buffers_and_grains/015-triggering-methods/">
            <span>Triggering Methods</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/buffers_and_grains/016-triggering-envgen/" class="dd-item
         active
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/buffers_and_grains/016-triggering-envgen/">
            <span>Triggering EnvGen and Line</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/buffers_and_grains/017-playing-grains/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/buffers_and_grains/017-playing-grains/">
            <span>Playing Grains</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/data/" class="dd-item 



">
  <a href="https://iani.github.io/sc-hacks-hugodoc/data/">
    <span>Playing with data</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/data/019-playing-with-data/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/data/019-playing-with-data/">
            <span>Playing With Data</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/server_objects/" class="dd-item 



">
  <a href="https://iani.github.io/sc-hacks-hugodoc/server_objects/">
    <span>Server objects</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/server_objects/021-server-objects/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/server_objects/021-server-objects/">
            <span>Server Objects</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/basic_classes/" class="dd-item 



">
  <a href="https://iani.github.io/sc-hacks-hugodoc/basic_classes/">
    <span>Basic Classes</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/basic_classes/023-registry/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/basic_classes/023-registry/">
            <span>Registry: Hierarchical Namespaces</span> 
            

            </a></li>
         
        
         
          <li data-nav-id="/basic_classes/024-notification/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/basic_classes/024-notification/">
            <span>Notification</span> 
            

            </a></li>
         
        
        




    </ul>
</li>


<li data-nav-id="/use_examples/" class="dd-item 



">
  <a href="https://iani.github.io/sc-hacks-hugodoc/use_examples/">
    <span>Use examples</span>

    
    <i class="fa fa-angle-right fa-lg category-icon"></i>
    
    
    
  </a>
    <ul>
        
         
          <li data-nav-id="/use_examples/026-pattern-synth-play/" class="dd-item
         
          ">
            <a href="https://iani.github.io/sc-hacks-hugodoc/use_examples/026-pattern-synth-play/">
            <span>Pattern and Synth play scenarios</span> 
            

            </a></li>
         
        
        




    </ul>
</li>



        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='https://iani.github.io/sc-hacks-hugodoc/'>Main</a> > <a href='https://iani.github.io/sc-hacks-hugodoc/buffers_and_grains/'>Playing buffers and grains</a> > Triggering EnvGen and Line

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">

    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Triggering EnvGen and Line</h1>
          




<p>Besides controlling the amplitude shape of a single sound-event or note in its entirety, envelopes can also be used to generate streams of sound events with the same synth.  The same technique can also be applied to Line or Xline to arbitrarily construct shapes controlling any parameter on the fly.  Here are some examples explaining how to do this using either just the default <strong>SCClassLibrary</strong> and the <strong>sc-hacks</strong> library.</p>

<ol>
Two items are necessary to re-trigger envelope or line-segment UGens in a Synth:
<li>The <code>doneAction</code> argument of the UGen in question must have a value of 0 in order to keep the Synth alive afer the UGen has finished playing.</li>
<li>The UGen in question must use a control in its <code>gate</code> argument. The UGen restarts whenever the value of the <code>gate</code> control changes from 0 to 1.  Furthermore, if the Envelope contains a release part, then the release part will be triggered when the <code>gate</code> control changes from 1 to 0.</li>
</ol>

<h1 id="caution-use-a-name-other-than-gate-as-control-name-for-triggering">Caution: Use a name other than <code>gate</code> as control name for triggering</h1>

<p>*NOTE: The control used to trigger the EnvGen <em>must have a name different than</em> <code>gate</code>, otherwise SC will be unable to release the synth because it creates a second <code>gate</code> control by default when creating synthdefs from functions.  For example:</p>

<pre><code class="language-sclang">
  //: This is wrong:
  a =  { | freq = 400, gate = 0 |
	  var env;
	  env = Env.adsr ();
	  SinOsc.ar (freq, 0, 0.1)
	  ,* EnvGen.kr (env, gate: gate, doneAction: 0)
  }.play;
  NodeWatcher.register (a); // register a to update state when it ends
  //: Test if a is playing
  a.isPlaying;
  // first let it make a sound:
  a.set (\gate, 1);
  //: then try to release it:
  a.release;
  //: The output amplitude is 0 but the synth is still playing:
  a.isPlaying;
  //: Try again, specifying a release time:
  a.release (0.1);
  //: To really stop the synth, you have to free it
  a.free;
  //: The synth has stopped playing. Synth count should be 0 in the server display
  a.isPlaying; // returns false
</code></pre>

<h1 id="function-play-and-synth-set-scclasslibrary">Function play and Synth set (SCClassLibrary)</h1>

<p>Here is a simple example using only the standard SCClassLibrary:</p>

<pre><code class="language-sclang">
  //: Start a triggerable synth and store it in variable a
  // Note: The EnvGen will not be triggered because trig is 0.
  // Thus the synth will not produce an audible signal.

  // use trig instead of gate as control name!
  a = { | freq = 400, trig = 0 |
	  var env;
	  env = Env.adsr ();
	  SinOsc.ar (freq, 0, 0.1)
	  ,* EnvGen.kr (env, gate: trig, doneAction: 0)
  }.play;
  //: Trigger the envelope
  a.set (\trig, 1);
  //: Release the envelope
  a.set (\trig, 0);
  //: Re-trigger the nevelope
  a.set (\trig, 1);
  //: Release the envelope again
  a.set (\trig, 0);
  //: Run a routine to start and stop the synth several times
  {
	  10 do: { | i |
		  a.set (\trig, (i + 1) % 2); // i+1 : start with trigger on
		  0.01.exprand (0.5).wait;
	  }
  }.fork;
  //: Do the same as above, but also change the frequency
  {
	  40 do: { | i |
		  // only change frequency when starting, not when releasing:
		  if (i + 1 % 2 &gt; 0) { // i / 2: wholetone -&gt; chromatic
			  a.set (\freq, (i / 2 + 60).midicps, \trig, 1);			
		  }{
			  a.set (\trig, 0);
		  };
		  0.01.exprand (0.5).wait;
	  };
  }.fork;
  //:

</code></pre>

<h1 id="control-through-environment-variables-using-function">Control through environment variables, using Function <code>+&gt;</code></h1>

<p>In <em>sc-hacks</em>, the operator <code>+&gt;</code> plays a function and stores its synth in the global Library using a <code>SynthPlayer</code> instance.  Additionally, it makes the synth react whenever an environment variable whose name corresponds to a control parameter of the synth is set in the <code>currentEnvironment</code>.  This makes it easy to control the synth through the environment.</p>

<pre><code class="language-sclang">
  { | freq = 400, trig = 0 |
	  var env;
	  env = Env.adsr ();
	  SinOsc.ar (freq, 0, 0.1)
	  ,* EnvGen.kr (env, gate: trig, doneAction: 0)
  } +&gt; \test;
  //:
  ~trig = 1;
  //:
  ~trig = 0;
  //:
  {
	  var trig;
	  inf do: { | i |
		  trig = i + 1 % 2;
		  if (trig &gt; 0) { ~freq = 300 rrand: 3000 };
		  ~trig = trig;
		  0.9.rand.wait;
	  };
  }.rout;
  // rout starts a routine like fork, and stores it in the library
  // under a name (default: 'routine')
  // Additionally, if a routine is running under the same name,
  // it stops that routine before starting the new one to replace it.
  //:
  {
	  var trig;
	  26 do: { | i |
		  trig = i + 1 % 2;
		  if (trig &gt; 0) { ~freq = (i / 2 + 60).midicps };
		  ~trig = trig;
		  0.24.wait;
	  };
  }.rout;
  //:
  {
	  20 do: { | i |
		  ~trig = i + 1 % 2;
		  ~freq = 300 rrand: 3000;
		  0.9.rand.wait;
	  }
  }.rout;
</code></pre>


<footer class=" footline" >
	
</footer>



      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                
                
                    
            
            
                
                    
                        
                        
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
                    
            
            
                
                    
                
                
                
            
        
                    
                        
            
            
                
                    
                
                
                
            
        
                    
                
            
        
        
        


        
            <a class="nav nav-prev" href="https://iani.github.io/sc-hacks-hugodoc/buffers_and_grains/015-triggering-methods/" title="Triggering Methods"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="https://iani.github.io/sc-hacks-hugodoc/buffers_and_grains/017-playing-grains/" title="Playing Grains" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/clipboard.min.js"></script>
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/featherlight.min.js"></script>
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/html5shiv-printshiv.min.js"></script>
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/modernizr.custom.71422.js"></script>
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/learn.js"></script>
    <script src="https://iani.github.io/sc-hacks-hugodoc/js/hugo-learn.js"></script>

    
    <link href="https://iani.github.io/sc-hacks-hugodoc/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="https://iani.github.io/sc-hacks-hugodoc/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>

